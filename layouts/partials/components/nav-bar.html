<template id="nav-bar">
    <nav>
        <div>
            <a href="/">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0 1.85663C4.16691 0.158493 9.0211 1.93184 10.8421 5.81752L16.843 18.622C17.7535 20.5648 16.8027 22.8281 14.7192 23.6772C12.6358 24.5262 10.2087 23.6396 9.29817 21.6967L0 1.85663Z" />
                    <path d="M12.7737 5.37762C11.8631 3.43472 12.814 1.17135 14.8975 0.322248C16.9811 -0.52685 19.4082 0.359854 20.3188 2.30276L24 10.1575L22.5527 10.7473C19.185 12.1198 15.2617 10.6865 13.7899 7.54603L12.7737 5.37762Z" />
                </svg>
            </a>
            <a href="/posts">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7.30435 -0.000488281C4.99916 -0.000488281 3.13043 1.79037 3.13043 3.99951V5.99951H1.04348C0.467181 5.99951 0 6.44723 0 6.99951C0 7.5518 0.467181 7.99951 1.04348 7.99951H3.13043V10.9995H1.04348C0.467181 10.9995 0 11.4472 0 11.9995C0 12.5518 0.467181 12.9995 1.04348 12.9995H3.13043V15.9995H1.04348C0.467181 15.9995 0 16.4472 0 16.9995C0 17.5518 0.467181 17.9995 1.04348 17.9995H3.13043V19.9995C3.13043 22.2087 4.99916 23.9995 7.30435 23.9995H19.8261C22.1313 23.9995 24 22.2087 24 19.9995V3.99951C24 1.79037 22.1313 -0.000488281 19.8261 -0.000488281H7.30435ZM19.8261 2.99951H12.5217V20.9995H19.8261C20.4024 20.9995 20.8696 20.5518 20.8696 19.9995V3.99951C20.8696 3.44723 20.4024 2.99951 19.8261 2.99951ZM6.26087 17.9995V19.9995C6.26087 20.5518 6.72805 20.9995 7.30435 20.9995H10.4348V2.99951H7.30435C6.72805 2.99951 6.26087 3.44723 6.26087 3.99951V5.99951H8.34783C8.92412 5.99951 9.3913 6.44723 9.3913 6.99951C9.3913 7.5518 8.92412 7.99951 8.34783 7.99951H6.26087V10.9995H8.34783C8.92412 10.9995 9.3913 11.4472 9.3913 11.9995C9.3913 12.5518 8.92412 12.9995 8.34783 12.9995H6.26087V15.9995H8.34783C8.92412 15.9995 9.3913 16.4472 9.3913 16.9995C9.3913 17.5518 8.92412 17.9995 8.34783 17.9995H6.26087Z" />
                </svg>
            </a>
        </div>
        <div>
            <a href="https://github.com/Vimolicious">
                <svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.2 3.20005H8.4C9.06274 3.20005 9.6 2.66279 9.6 2.00005C9.6 1.33731 9.06274 0.800049 8.4 0.800049H6C4.01178 0.800049 2.4 2.41182 2.4 4.40005V6.80005C2.4 7.46279 1.86274 8.00005 1.2 8.00005C0.537258 8.00005 0 8.53731 0 9.20005V11.6C0 12.2628 0.537258 12.8 1.2 12.8C1.86274 12.8 2.4 13.3373 2.4 14V16.4C2.4 18.3883 4.01178 20 6 20H8.4C9.06274 20 9.6 19.4628 9.6 18.8C9.6 18.1373 9.06274 17.6 8.4 17.6H7.2C5.87452 17.6 4.8 16.5255 4.8 15.2V12.2C4.8 11.5373 4.26274 11 3.6 11H3.2C2.82723 11 2.4252 10.7563 2.4252 10.4C2.4252 10 2.82723 9.80005 3.2 9.80005H3.6C4.26274 9.80005 4.8 9.26279 4.8 8.60005V5.60005C4.8 4.27457 5.87452 3.20005 7.2 3.20005Z" fill="#808080"/>
                    <path d="M16.8 3.20005H15.6C14.9373 3.20005 14.4 2.66279 14.4 2.00005C14.4 1.33731 14.9373 0.800049 15.6 0.800049H18C19.9882 0.800049 21.6 2.41182 21.6 4.40005V6.80005C21.6 7.46279 22.1373 8.00005 22.8 8.00005C23.4627 8.00005 24 8.53731 24 9.20005V11.6C24 12.2628 23.4627 12.8 22.8 12.8C22.1373 12.8 21.6 13.3373 21.6 14V16.4C21.6 18.3883 19.9882 20 18 20H15.6C14.9373 20 14.4 19.4628 14.4 18.8C14.4 18.1373 14.9373 17.6 15.6 17.6H16.8C18.1255 17.6 19.2 16.5255 19.2 15.2V12.2C19.2 11.5373 19.7373 11 20.4 11H20.8C21.1728 11 21.5748 10.7563 21.5748 10.4C21.5748 10 21.1728 9.80005 20.8 9.80005H20.4C19.7373 9.80005 19.2 9.26279 19.2 8.60005V5.60005C19.2 4.27457 18.1255 3.20005 16.8 3.20005Z" fill="#808080"/>
                </svg>
            </a>
        </div>
    </nav>

    <style>
        nav {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 100%;
            width: var(--nav-width);
            position: fixed;
            background-color: #212121;
            z-index: 2;
        }

        nav::before, nav::after {
            content: "";
            position: absolute;
            left: 100%;
            width: 16px;
            height: 16px;
        }

        nav::before {
            background-image: url("/img/svg/top-curve.svg");
            top: 0;
        }

        nav::after {
            background-image: url("/img/svg/bottom-curve.svg");
            bottom: 0;
        }

        nav > div {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        nav svg {
            display: block;
            padding: 13px;
            fill: var(--bg-color-nav-icon);
            width: 24px;
            height: 24px;
        }

        nav a[href="/"].active > svg {
            fill: #ffffff;
        }

        nav a.active > svg {
            fill: var(--bg-color-active-nav-icon);
        }

        @media(max-width: 1050px) {
            nav, nav > div {
                flex-direction: row;
                justify-content: space-around;
            }

            nav {
                width: 100%;
                height: var(--nav-width);
                bottom: 0;
                justify-content: space-around;
            }

            nav > div:first-child {
                flex-grow: 2;
            }

            nav > div:last-child {
                flex-grow: 1;
            }

            nav::before, nav::after {
                bottom: 100%;
                transform: rotate(-90deg) translate(100%);
                left: unset;
                right: unset;
                top: unset;
                bottom: unset;
            }

            nav::before {
                background-image: url("/img/svg/top-curve.svg");
                left: 0;
            }

            nav::after {
                background-image: url("/img/svg/bottom-curve.svg");
                right: 0;
            }

        }
    </style>
</template>

<script type="module">
    import { WebComponent } from "/scripts/webcomponent.js";

    customElements.define("nav-bar", class extends WebComponent {
        constructor() {
            super("#nav-bar");

            const nextSlashPos =
                1 + window.location.pathname.slice(1).indexOf("/");

            const sectionEndPos = nextSlashPos > 0 
                ? nextSlashPos
                : window.location.pathname.length;

            const section = window.location.pathname.slice(0, sectionEndPos);

            this.shadowRoot
                .querySelectorAll(`a[href="${section}"]`)
                .forEach(link => link.classList.add("active"));
        }
    });
</script>
